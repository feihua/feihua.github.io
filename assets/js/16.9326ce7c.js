(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{399:function(s,a,t){s.exports=t.p+"assets/img/gorm_code.751c1dc0.png"},400:function(s,a,t){s.exports=t.p+"assets/img/generate-code.10d13e0e.png"},401:function(s,a,t){s.exports=t.p+"assets/img/add_user_api.4983a7c9.png"},402:function(s,a,t){s.exports=t.p+"assets/img/add_user_proto.b3d6a5ec.png"},403:function(s,a,t){s.exports=t.p+"assets/img/main.dd0514e4.png"},404:function(s,a,t){s.exports=t.p+"assets/img/comment.5aec6fbc.png"},433:function(s,a,t){"use strict";t.r(a);var e=t(9),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"二次开发-重点-新版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二次开发-重点-新版本"}},[s._v("#")]),s._v(" 二次开发(重点)-新版本")]),s._v(" "),a("h2",{attrs:{id:"_1-相关工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-相关工具"}},[s._v("#")]),s._v(" 1.相关工具")]),s._v(" "),a("ol",[a("li",[s._v("goctl(根据api或者proto生成go-zero相关代码)")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("go "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" github.com/zeromicro/go-zero/tools/goctl@latest\ngoctl "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("env")]),s._v(" check "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--verbose")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--force")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("generate-code(根据数据库表生成xx.api和xx.proto文件)")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("https://github.com/feihua/generate-code.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2-以用户表为例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-以用户表为例"}},[s._v("#")]),s._v(" 2.以用户表为例：")]),s._v(" "),a("ol",[a("li",[s._v("设计用户表")]),s._v(" "),a("li",[s._v("使用gorm的gen生成model")]),s._v(" "),a("li",[s._v("生成api和proto文件")]),s._v(" "),a("li",[s._v("使用goctl根据api生成代码")]),s._v(" "),a("li",[s._v("使用goctl根据proto生成代码")]),s._v(" "),a("li",[s._v("拷贝生成的代码到api或rpc中（可选）")])]),s._v(" "),a("h2",{attrs:{id:"开发流程-重点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发流程-重点"}},[s._v("#")]),s._v(" 开发流程(重点)")]),s._v(" "),a("ul",[a("li",[a("font",{attrs:{face:"宋体",color:"red",size:"5"}},[s._v("这个是重点!")])],1),s._v(" "),a("li",[a("font",{attrs:{face:"宋体",color:"red",size:"5"}},[s._v("这个是重点!")])],1),s._v(" "),a("li",[a("font",{attrs:{face:"宋体",color:"red",size:"5"}},[s._v("这个是重点!")])],1)]),s._v(" "),a("h3",{attrs:{id:"_2-1-设计用户表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-设计用户表"}},[s._v("#")]),s._v(" 2.1. 设计用户表")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" gozero"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sys_user\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    id          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("auto_increment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'编号'")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("primary")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    name        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户名'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    nick_name   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("150")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                        "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'昵称'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    avatar      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("150")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                        "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'头像'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    password    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'密码'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    salt        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'加密盐'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    email       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                        "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'邮箱'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    mobile      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                        "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'手机号'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tinyint")]),s._v("                             "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'状态  0：禁用   1：正常'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    dept_id     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bigint")]),s._v("                              "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'部门id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    job_id      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v("                                 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'岗位id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    create_by   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'创建者'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    create_time "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("timestamp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'创建时间'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    update_by   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                         "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新者'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    update_time "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("datetime")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CURRENT_TIMESTAMP")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'更新时间'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    del_flag    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("tinyint")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'是否删除  0：已删除  1：正常'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("constraint")]),s._v(" name\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unique")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("comment")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户管理'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h3",{attrs:{id:"_2-2-使用gorm的gen生成model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-使用gorm的gen生成model"}},[s._v("#")]),s._v(" 2.2 使用gorm的gen生成model")]),s._v(" "),a("p",[a("img",{attrs:{src:t(399),alt:"img.png"}})]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("go run rpc/sys/gen/generator.go\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-3-生成api和proto文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-生成api和proto文件"}},[s._v("#")]),s._v(" 2.3 生成api和proto文件")]),s._v(" "),a("p",[a("strong",[s._v("主要是使用代码生成器")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("https://github.com/feihua/generate-code.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("执行生成代码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("go run main.go golang zero "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dsn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root:123456@tcp(127.0.0.1:3306)/zero-sys"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tableNames")]),s._v(" sys_user "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),s._v(" sys_  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rpcClient")]),s._v(" sysclient "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--author")]),s._v(" liufeihua\n\ndsn: 数据库的地址\ntableNames: 表名称\nprefix: 生成表时候去掉前缀\nauthor: 作者名称\nrpcClient 生成rpc的模块名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("下图是生成的代码：\n"),a("img",{attrs:{src:t(400),alt:"img.png"}})]),s._v(" "),a("h3",{attrs:{id:"_2-4-使用goctl根据api生成代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-使用goctl根据api生成代码"}},[s._v("#")]),s._v(" 2.4 使用goctl根据api生成代码")]),s._v(" "),a("p",[a("strong",[s._v("把上面生成的user.api放到项目对应的目录（我现在放到admin下）")]),s._v(" "),a("img",{attrs:{src:t(401),alt:"img.png"}})]),s._v(" "),a("p",[s._v("使用goctl工具生成代码即可")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("\ngoctl api go "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-api")]),s._v(" ./api/doc/api/admin.api "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-dir")]),s._v(" ./api/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_2-5-使用goctl根据proto生成代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-使用goctl根据proto生成代码"}},[s._v("#")]),s._v(" 2.5 使用goctl根据proto生成代码")]),s._v(" "),a("p",[a("strong",[s._v("把上面生成的user.proto放到项目对应的目录（我现在放到rpc/sys/proto下）")]),s._v(" "),a("img",{attrs:{src:t(402),alt:"img.png"}})]),s._v(" "),a("ul",[a("li",[a("font",{attrs:{face:"宋体",color:"red",size:"5"}},[s._v("由于go-zero的goctl生成gprc服务只能是一个proto，服务多的时候 比较乱，所以用这个工具来合成一个")])],1)]),s._v(" "),a("p",[s._v("在生成rpc代码生，要先执行\n"),a("img",{attrs:{src:t(403),alt:"img.png"}})]),s._v(" "),a("p",[s._v("最后执行goctl生成rpc代码")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成sys-rpc代码")]),s._v("\ngoctl rpc protoc rpc/sys/sys.proto "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--go_out")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./rpc/sys/ --go-grpc_out"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./rpc/sys/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--zrpc_out")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("./rpc/sys/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_2-6-拷贝生成的代码到api或rpc中-可选"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-拷贝生成的代码到api或rpc中-可选"}},[s._v("#")]),s._v(" 2.6 拷贝生成的代码到api或rpc中（可选）")]),s._v(" "),a("p",[a("img",{attrs:{src:t(404),alt:"img.png"}})]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[a("strong",[s._v("为了减少生成代码复杂度,不进行模板定制,和官方的一样")]),s._v("。")])])])}),[],!1,null,null,null);a.default=n.exports}}]);